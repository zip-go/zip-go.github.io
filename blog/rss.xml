<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>집사의고민 Blog</title>
        <link>https://zip-go.github.io/blog</link>
        <description>집사의고민 Blog</description>
        <lastBuildDate>Sun, 30 Jul 2023 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[restassured 와 restdocs에 swagger ui 곁들이기]]></title>
            <link>https://zip-go.github.io/blog/2</link>
            <guid>https://zip-go.github.io/blog/2</guid>
            <pubDate>Sun, 30 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[안녕하세요, 집사의고민 백엔드 개발자 로지입니다. 이번 글에서는 저희 팀이 선택한 API 문서화 방법을 소개하고 어떻게 적용했는지 알려드리려고해요.]]></description>
            <content:encoded><![CDATA[<p>안녕하세요, 집사의고민 백엔드 개발자 로지입니다. 이번 글에서는 저희 팀이 선택한 API 문서화 방법을 소개하고 어떻게 적용했는지 알려드리려고해요.</p><hr><p>웹 애플리케이션 API를 구현하고 관리하게 되면 문서화에 어떤 기술을 활용할지 고민하게되는데요,
스프링 진영에는 다음 기술들을 주로 고려하는 것 같습니다.</p><ul><li>Spring Restdocs</li><li>Swagger Generator</li></ul><p>결론적으로, 이 둘 중 하나를 써도 되지만 저희 팀은 두 기술을 모두 활용해보기로 했습니다.</p><p>저희 팀은 먼저, 실제로 호출되는 API와 문서가 동기화되는 restdocs를 사용하기로 결정했습니다. 하지만 기존에 restdocs를 사용해본 경험이 있는 크루들은 restdocs의 asscidoc 이 swagger ui에 비해 화면/기능에 있어 실용성이 부족하다고 생각했습니다.</p><p>이 부분을 절충하기 위해, swagger generator에서 ui를 생성하는 기능만을 사용해 restdocs와 함께 사용해보는 것으로 결정하게 되었습니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="필요한-도구들">필요한 도구들<a href="#필요한-도구들" class="hash-link" aria-label="Direct link to 필요한 도구들" title="Direct link to 필요한 도구들">​</a></h2><ul><li>restassured (인수테스트 도구): 저희 팀은 인수테스트를 수행해 restdocs를 발행합니다. 인수테스트에 restassured라는 http 클라이언트 테스트 도구를 사용합니다.</li><li>restdocs (문서화도구): restassured 테스트를 진행하며 API의 정보를 adoc으로 발행합니다.</li><li><strong><a href="https://github.com/ePages-de/restdocs-api-spec" target="_blank" rel="noopener noreferrer">restdocs-api-spec</a>:</strong> restdocs에서 만들어준 adoc으로는 바로 swagger UI를 만들 수 없습니다. swagger ui를 발행할 수 있도록, adoc을 open api spec으로 변환해주는 도구입니다.</li><li><strong><a href="https://github.com/int128/gradle-swagger-generator-plugin" target="_blank" rel="noopener noreferrer">gradle-swagger-generator-plugin</a> :</strong> adoc에서 변환된 <strong>open api spec으로부터 swagger ui를</strong> 만드는데 사용할 도구입니다.</li></ul><p>눈치채셨겠지만, 테스트부터 ui를 만드는 데까지 사용하는 순서대로 도구를 소개해드렸어요.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="팀-개발-환경">팀 개발 환경<a href="#팀-개발-환경" class="hash-link" aria-label="Direct link to 팀 개발 환경" title="Direct link to 팀 개발 환경">​</a></h2><p>저희 팀은 다음 환경에서 작업을 진행했습니다!</p><ul><li>java 17</li><li>Spring boot 3</li><li>gradle 8.2.1</li><li>intellij idea</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="흐름-보기">흐름 보기<a href="#흐름-보기" class="hash-link" aria-label="Direct link to 흐름 보기" title="Direct link to 흐름 보기">​</a></h2><p>자세한 설정까지는 아니더라도, 코드로 흐름을 본다면 이 글을 읽기가 더 수월할 것 같아 먼저 코드 조각들을 보여드리려고 합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="restassured로-테스트하는-코드">RestAssured로 테스트하는 코드<a href="#restassured로-테스트하는-코드" class="hash-link" aria-label="Direct link to RestAssured로 테스트하는 코드" title="Direct link to RestAssured로 테스트하는 코드">​</a></h3><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#4B0082">void</span><span class="token plain"> 파라미터에_이름을_넣고_요청한다</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// given</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#4B0082">var</span><span class="token plain"> 요청_준비 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">given</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">contentType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">JSON</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">성공_응답_문서_만들기</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"hello-rosie-world-성공"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// when</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#4B0082">var</span><span class="token plain"> 응답 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> 요청_준비</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">when</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">pathParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"name"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"김크루"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/rosie/{name}"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    응답</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">assertThat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">statusCode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">OK</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>RestAssured 의 given, when, then 메서드를 사용해서 테스트를 진행합니다.
<code>요청_준비</code> 변수를 만드는 마지막줄에 <code>filter</code> 메서드에 RestDocs가 문서를 만들수 있도록 다음과 같이 명시해줍니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#4B0082">private</span><span class="token plain"> </span><span class="token class-name">RestDocumentationFilter</span><span class="token plain"> 성공_응답_문서_만들기</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> 제목</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#4B0082">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">document</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">제목</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token constant" style="color:#36acaa">API_</span><span class="token plain">정보</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">responseSchema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">성공_응답_형식</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">pathParameters</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">parameterWithName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"name"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">description</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"놀러와주신 분의 성함"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">responseFields</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">fieldWithPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"messages"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">description</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"환영의 단어들"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">fieldWithPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"ps"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">description</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"로지가 추가로 전하는 말"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 테스트를 실행하면, restdocs가 adoc을 만들어줍니다.</p><p><img loading="lazy" src="https://velog.velcdn.com/images/kyy00n/post/92dcaebd-5baf-4c59-aa2c-d499e04f1a80/image.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="open-api-스펙으로-변환하기">open api 스펙으로 변환하기<a href="#open-api-스펙으로-변환하기" class="hash-link" aria-label="Direct link to open api 스펙으로 변환하기" title="Direct link to open api 스펙으로 변환하기">​</a></h3><p>만들어진 adoc 파일은 다음과 같은데요, swagger UI에 활용할수 있도록 openapi 형식으로 변환해줍니다.
openapi3 태스크를 실행하면 open api 3.0 스펙으로 생성돼요.</p><p><img loading="lazy" src="https://velog.velcdn.com/images/kyy00n/post/a76b6ca3-d2bb-4517-8fef-d20d16123868/image.png" class="img_ev3q"></p><p><img loading="lazy" src="https://velog.velcdn.com/images/kyy00n/post/fa27f6f6-0934-4094-a5cf-0b3a35f90554/image.png" class="img_ev3q"></p><p>이렇게 만든 문서는 다음 화면에 대응될 예정입니다 :D</p><p><img loading="lazy" src="https://velog.velcdn.com/images/kyy00n/post/3fcb339f-7d3d-4fb9-aabb-83989d63d7b1/image.png" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="buildgradle-설정">build.gradle 설정<a href="#buildgradle-설정" class="hash-link" aria-label="Direct link to build.gradle 설정" title="Direct link to build.gradle 설정">​</a></h2><p>제가 사용한 그래들 스크립트입니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="플러그인">플러그인<a href="#플러그인" class="hash-link" aria-label="Direct link to 플러그인" title="Direct link to 플러그인">​</a></h3><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">plugins </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 2. restdocs-api-spec 플러그인 추가</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id </span><span class="token string" style="color:#e3116c">'com.epages.restdocs-api-spec'</span><span class="token plain"> version </span><span class="token interpolation-string string" style="color:#e3116c">"</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token interpolation-string interpolation expression">restdocsApiSpecVersion</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token interpolation-string string" style="color:#e3116c">"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 3. swagger-generator 플러그인 추가</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id </span><span class="token string" style="color:#e3116c">'org.hidetake.swagger.generator'</span><span class="token plain"> version </span><span class="token string" style="color:#e3116c">'2.18.2'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dependencies">dependencies<a href="#dependencies" class="hash-link" aria-label="Direct link to dependencies" title="Direct link to dependencies">​</a></h3><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dependencies </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testImplementation </span><span class="token string" style="color:#e3116c">'io.rest-assured:rest-assured'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testImplementation </span><span class="token string" style="color:#e3116c">'org.springframework.restdocs:spring-restdocs-restassured'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testImplementation </span><span class="token interpolation-string string" style="color:#e3116c">"com.epages:restdocs-api-spec-restassured:</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token interpolation-string interpolation expression">restdocsApiSpecVersion</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token interpolation-string string" style="color:#e3116c">"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testImplementation </span><span class="token interpolation-string string" style="color:#e3116c">"com.epages:restdocs-api-spec-mockmvc:</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token interpolation-string interpolation expression">restdocsApiSpecVersion</span><span class="token interpolation-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token interpolation-string string" style="color:#e3116c">"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    swaggerUI </span><span class="token string" style="color:#e3116c">'org.webjars:swagger-ui:4.11.1'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="플러그인태스크-설정">플러그인/태스크 설정<a href="#플러그인태스크-설정" class="hash-link" aria-label="Direct link to 플러그인/태스크 설정" title="Direct link to 플러그인/태스크 설정">​</a></h3><ul><li>openapi3 설정</li><li>스웨거 ui 생성</li><li>bootJar 설정</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="openapi3">openapi3<a href="#openapi3" class="hash-link" aria-label="Direct link to openapi3" title="Direct link to openapi3">​</a></h3><p>우선 restdocs-api-spec 의 설정을 해줄거예요.</p><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openapi3 </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 4. open api 설정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">"http://localhost:8080"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 4-1. 요청 보낼 서버의 baseUrl</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#e3116c">"로지 API Docs"</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 4-2. 제목</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#e3116c">"로지네 API 명세서"</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 4-3. 설명</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#e3116c">"0.0.1"</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 4-4. api 문서의 버전</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    format </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token interpolation-string string" style="color:#e3116c">"yaml"</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 4-5. openapi 형식을 저장할 형식 (yaml/json)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>코드와 대응하는 화면을 보여드릴게요.</p><p><img loading="lazy" src="https://velog.velcdn.com/images/kyy00n/post/6d7d35f8-1cc8-42fe-86c7-85615142d71b/image.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="generateswaggerui-설정">GenerateSwaggerUI 설정<a href="#generateswaggerui-설정" class="hash-link" aria-label="Direct link to GenerateSwaggerUI 설정" title="Direct link to GenerateSwaggerUI 설정">​</a></h3><p>그리고 나서, swaggerUI 를 만드는 태스크를 정의해줍니다.
자세한 설명은 주석을 참고해주세요.</p><div class="language-groovy codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-groovy codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tasks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GenerateSwaggerUI</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 5. swaggerUI 를 생성하는 task들은 전부</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dependsOn </span><span class="token string" style="color:#e3116c">'openapi3'</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// openapi3 이 실행된 이후에 실행되도록 설정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">swaggerSources </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 6. swagger ui 생성에 필요한 source 설정.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rosieProject </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ⭐️ rosieProject(이름은 프로젝트에 맞도록 변경) 라는 스웨거 ui의</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">setInputFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">"build/api-spec/openapi3.yaml"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 소스 위치를 설정. (현재는 default 위치)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 7. rosieProject 에 대한 swagger ui를 생성하는 task.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">generateSwaggerUIRosieProject </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    doLast </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ui 파일들이 생성되고 난 뒤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        copy </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 정적 리소스 디렉토리로 복사</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            from outputDir</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            into </span><span class="token interpolation-string string" style="color:#e3116c">"build/resources/main/static/docs"</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// jar 파일에 포한되려면 build/ 내의 위치로 설정해야합니다!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>[2023.08.05 수정]</p><p>이전에 제가 실수로 src 하위에 (src/main/resources/static/docs) 파일을 복사하도록 했는데, 이렇게하면 jar 패키징에 생성한 ui파일들이 포함되지 않습니다~</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bootjar-태스크-설정">bootJar 태스크 설정<a href="#bootjar-태스크-설정" class="hash-link" aria-label="Direct link to bootJar 태스크 설정" title="Direct link to bootJar 태스크 설정">​</a></h3><p>마지막으로, jar 패키징에 swagger ui가 포함될 수 있도록 설정해줍니다.</p><div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bootJar </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dependsOn generateSwaggerUI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>만약 위 스크립트로 안되면</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bootJar </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dependsOn tasks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">withType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">GenerateSwaggerUI</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이렇게 해보시면 됩니다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="테스트-코드-작성">테스트 코드 작성<a href="#테스트-코드-작성" class="hash-link" aria-label="Direct link to 테스트 코드 작성" title="Direct link to 테스트 코드 작성">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requestspecification-설정"><code>RequestSpecification</code> 설정<a href="#requestspecification-설정" class="hash-link" aria-label="Direct link to requestspecification-설정" title="Direct link to requestspecification-설정">​</a></h3><p>RestAssured에서 Restdocs를 사용하기 위해서, 저는 다음과 같이 추상클래스에서 RequestSpecification 필드를 관리하게 되었습니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@ExtendWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token class-name">RestDocumentationExtension</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#4B0082">class</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">SpringExtension</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#4B0082">class</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@SpringBootTest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">webEnvironment </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">SpringBootTest</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">WebEnvironment</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">RANDOM_PORT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#4B0082">public</span><span class="token plain"> </span><span class="token keyword" style="color:#4B0082">abstract</span><span class="token plain"> </span><span class="token keyword" style="color:#4B0082">class</span><span class="token plain"> </span><span class="token class-name">AcceptanceTest</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#4B0082">protected</span><span class="token plain"> </span><span class="token class-name">RequestSpecification</span><span class="token plain"> spec</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@LocalServerPort</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#4B0082">private</span><span class="token plain"> </span><span class="token keyword" style="color:#4B0082">int</span><span class="token plain"> port</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@BeforeEach</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#4B0082">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setUp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">RestAssured</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">port </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> port</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@BeforeEach</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#4B0082">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setUpRestDocs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">RestDocumentationContextProvider</span><span class="token plain"> provider</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">RestAssuredOperationPreprocessorsConfigurer</span><span class="token plain"> filter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">documentationConfiguration</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">provider</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">operationPreprocessors</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#4B0082">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#4B0082">new</span><span class="token plain"> </span><span class="token class-name">RequestSpecBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setPort</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">port</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addFilter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">filter</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="restdocs가-설정된-requestspecification-사용하기">restdocs가 설정된 RequestSpecification 사용하기<a href="#restdocs가-설정된-requestspecification-사용하기" class="hash-link" aria-label="Direct link to restdocs가 설정된 RequestSpecification 사용하기" title="Direct link to restdocs가 설정된 RequestSpecification 사용하기">​</a></h3><p>restAssured 사용시, specification을 명시하지 않는 <code>given()</code> 을 이용하면 다음과 같이 매번 새로운 Specification을 사용합니다.</p><p><img loading="lazy" src="https://velog.velcdn.com/images/kyy00n/post/e081e288-ee0b-4b9b-ad07-2a3ca6babf95/image.png" class="img_ev3q"></p><p><img loading="lazy" src="https://velog.velcdn.com/images/kyy00n/post/81e43472-71c8-44e7-8428-12210ef7e33a/image.png" class="img_ev3q"></p><p>우리가 위에서 설정해준 spec 변수를 이용하기 위해서는 다음 방법으로 restAsscured를 사용해야합니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">given</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">given</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">spec</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> given을 사용하지 않는경우</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">when</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">spec</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="테스트-별로-생성할-문서-정의하기">테스트 별로 생성할 문서 정의하기<a href="#테스트-별로-생성할-문서-정의하기" class="hash-link" aria-label="Direct link to 테스트 별로 생성할 문서 정의하기" title="Direct link to 테스트 별로 생성할 문서 정의하기">​</a></h3><p>보통 restdocs를 asciidoc 으로 문서를 생성할 때는, 다음과 같이<code>RestAssuredRestDocumentation.document</code> 를 사용하는데요,</p><p>이 메서드를 restdocs-api-spec이 제공하는 wrapper 클래스의 메서드로 바꿔 사용합니다. (구현을 보면 많이 다를 건 없지만, 깃허브를 보면 openapi spec으로 변환할 때 편리함을 위해 제공한다고 합니다.)</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#4B0082">private</span><span class="token plain"> </span><span class="token class-name">ResourceSnippetDetails</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">API_</span><span class="token plain">정보 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">resourceDetails</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">summary</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"로지월드 들어가기 API"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">description</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"로지 월드에 와서 환영을 받습니다."</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#4B0082">void</span><span class="token plain"> 파라미터에_이름을_넣고_요청한다</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// given</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#4B0082">var</span><span class="token plain"> 요청_준비 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">given</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">contentType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">JSON</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 여기입니다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                </span><span class="token class-name">RestAssuredRestDocumentationWrapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">document</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"hello-rosie-world-성공"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">API_</span><span class="token plain">정보</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// when</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#4B0082">var</span><span class="token plain"> 응답 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> 요청_준비</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">when</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">pathParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"name"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"김크루"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/rosie/{name}"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    응답</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">assertThat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">statusCode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">OK</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="같은-api에-대한-여러-요청응답">같은 API에 대한 여러 요청(응답)<a href="#같은-api에-대한-여러-요청응답" class="hash-link" aria-label="Direct link to 같은 API에 대한 여러 요청(응답)" title="Direct link to 같은 API에 대한 여러 요청(응답)">​</a></h3><p>같은 API에 대해서도, 여러 응답을 문서화해야하는데요. 이 작업은 별도의 작업이 필요하진 않습니다. 테스트별 document 메서드의 <strong>ResourceSnippetDetails 인자를 동일하게</strong> 설정해주면, 하나의 요청으로 간주하여 다음과같이 응답을 합쳐줍니다.</p><p><img loading="lazy" src="https://velog.velcdn.com/images/kyy00n/post/0d87b552-21f4-4e69-89ca-0ebad67d59eb/image.png" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="document-사용법">document() 사용법<a href="#document-사용법" class="hash-link" aria-label="Direct link to document() 사용법" title="Direct link to document() 사용법">​</a></h2><p><img loading="lazy" src="https://velog.velcdn.com/images/kyy00n/post/cbc9078d-3f2a-461f-9433-39fed34fb201/image.png" class="img_ev3q"></p><p>restdocs-api-spec 모듈은 코틀린으로 작성되어서.. 참고하시며 작업하시길 바라구요.
어쨌든, document() 메서드에는 많은 인자들이 들어갈 수 있는데요. 각 인자가 어떤 요소에 대응되는지 정리해봤습니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="identifier-rest-docs-생성-파일-디렉토리명"><code>identifier</code>: rest docs 생성 파일 디렉토리명<a href="#identifier-rest-docs-생성-파일-디렉토리명" class="hash-link" aria-label="Direct link to identifier-rest-docs-생성-파일-디렉토리명" title="Direct link to identifier-rest-docs-생성-파일-디렉토리명">​</a></h3><p>document() 메서드의 첫번째 인자인데요, 이 아이는 restdocs에서 코드를 생성할 때 만들어지는 디렉토리의 이름이됩니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">given</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">contentType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">JSON</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">document</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"hello-rosie-world-성공"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">API_</span><span class="token plain">정보</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이렇게 설정하고, 테스트를 통과한다면 설정한 이름의 디렉토리에 adoc 파일들이 생성된 것을 확인할 수 있어요.</p><p><img loading="lazy" src="https://velog.velcdn.com/images/kyy00n/post/92dcaebd-5baf-4c59-aa2c-d499e04f1a80/image.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="resourcedetails--api-정보"><code>resourceDetails</code> : API 정보<a href="#resourcedetails--api-정보" class="hash-link" aria-label="Direct link to resourcedetails--api-정보" title="Direct link to resourcedetails--api-정보">​</a></h3><p>API 정보는 <code>ResourceSnippetDetails</code> 클래스 로 정의합니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">ResourceSnippetDefails</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">API_</span><span class="token plain">정보 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">resourceDetails</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">summary</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"로지월드 들어가기 API"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">description</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"로지 월드에 와서 환영을 받습니다."</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">given</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">contentType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">JSON</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">document</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"hello-rosie-world-성공"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">API_</span><span class="token plain">정보</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이 코드는 다음 화면에 대응돼요.</p><p><img loading="lazy" src="https://velog.velcdn.com/images/kyy00n/post/8be45ced-397d-4c9f-8ca4-8c3510c0154a/image.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requestprocessor--responseprocessor-요청응답에-적용할-프로세서"><code>requestProcessor</code> , <code>responseProcessor</code>: 요청/응답에 적용할 프로세서<a href="#requestprocessor--responseprocessor-요청응답에-적용할-프로세서" class="hash-link" aria-label="Direct link to requestprocessor--responseprocessor-요청응답에-적용할-프로세서" title="Direct link to requestprocessor--responseprocessor-요청응답에-적용할-프로세서">​</a></h3><p><code>OperationProcessor</code> 객체를 인자로 받습니다. OperationProcessor는 요청 또는 응답이 문서화되기 전에 적용하고 싶은 것을 정의할 수 있어요.</p><p>+) 프로세서는 다음과 같은 것들이 있어요: prettyPrint(), removeHeaders() 등..</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="snippeetfilters"><code>snippeetFilters</code><a href="#snippeetfilters" class="hash-link" aria-label="Direct link to snippeetfilters" title="Direct link to snippeetfilters">​</a></h3><p><code>Function&lt;List&lt;Snippet&gt;, List&lt;Snippet&gt;&gt;</code> 인데요, 변수명과 자료형을 보아 스니펫 리스트를 필터링하는데 사용하는 것 같습니다.</p><p>그러나 정확히 어떤 목적을 위한 변수인지는 모르겠습니다! 아시는 분은 알려주세요~
저는 쓸 필요를 못느껴서 Pass~</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="snippets--요청응답-예시-등-api-문서-조각에-쓰이는-모든-것"><code>snippets</code> : 요청/응답 예시 등 API 문서 조각에 쓰이는 모든 것<a href="#snippets--요청응답-예시-등-api-문서-조각에-쓰이는-모든-것" class="hash-link" aria-label="Direct link to snippets--요청응답-예시-등-api-문서-조각에-쓰이는-모든-것" title="Direct link to snippets--요청응답-예시-등-api-문서-조각에-쓰이는-모든-것">​</a></h3><p><code>org.springframework.restdocs.snippet</code> 에 정의돼있는 <code>Snippet</code> 객체를 가변 인자로 받아요.</p><p>저는 보통 다음과같이 요청 파라미터, 요청/응답 바디 Snippet을 활용하는 편입니다.</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">document</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"hello-rosie-world-성공"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token constant" style="color:#36acaa">API_</span><span class="token plain">정보</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">responseSchema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">성공_응답_형식</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 파라미터에 대한 snippet 생성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">pathParameters</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">parameterWithName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"name"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">description</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"놀러와주신 분의 성함"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 응답 바디에 대한 snippet 생성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">responseFields</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token function" style="color:#d73a49">fieldWithPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"messages"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">description</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"환영의 단어들"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token function" style="color:#d73a49">fieldWithPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"ps"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">description</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"로지가 추가로 전하는 말"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">optional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이외에도 Snippet은 여러가지 종류가 있는데요, 스니펫을 만들기 위해서는 <strong>지정된 정적 팩토리 메서드</strong>를 사용해야해서, 문서화가 필요한 대상의 키워드(ex. 쿼리파라미터, 헤더)로 <a href="https://docs.spring.io/spring-restdocs/docs/2.0.5.RELEASE/reference/html5/#documenting-your-api" target="_blank" rel="noopener noreferrer">restdocs 공식문서</a>에서 검색해보시면 쉽게 찾을 수 있습니다 :D</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="전체-코드">전체 코드<a href="#전체-코드" class="hash-link" aria-label="Direct link to 전체 코드" title="Direct link to 전체 코드">​</a></h2><p>전체 코드는 깃허브에 올려뒀습니다. 글에서 조각으로 보면 복잡한 것 같기도한데, 한번에 보면 괜찮은 것 같아요.</p><p><a href="https://github.com/kyY00n/restassured-restdocs-swaggerui" target="_blank" rel="noopener noreferrer">https://github.com/kyY00n/restassured-restdocs-swaggerui</a></p><hr><p>꽤 긴 튜토리얼이었는데요, 처음부터 꼼꼼히 읽기 보다는 초반에 소개드렸던 적용 흐름을 파악하시고, 디테일한 부분들은 공식문서와 함께 보는 것을 추천합니다 :D</p><p>여튼 읽어 주셔서 감사합니다.
올바르지 않거나 부족한 설명이 있다면 알려주세요!
여러분의 피드백을 격하게 환영합니다 :D</p><p>References</p><ul><li><a href="https://github.com/ePages-de/restdocs-api-spec" target="_blank" rel="noopener noreferrer">https://github.com/ePages-de/restdocs-api-spec</a></li><li><a href="https://github.com/int128/gradle-swagger-generator-plugin" target="_blank" rel="noopener noreferrer">https://github.com/int128/gradle-swagger-generator-plugin</a></li><li><a href="https://docs.spring.io/spring-restdocs/docs/current/reference/htmlsingle/#getting-started" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-restdocs/docs/current/reference/htmlsingle/#getting-started</a></li></ul>]]></content:encoded>
            <category>RestAssured</category>
            <category>RestDocs</category>
            <category>SwaggerUI</category>
            <category>API문서</category>
        </item>
        <item>
            <title><![CDATA[집고팀의 Merge 전략]]></title>
            <link>https://zip-go.github.io/blog/3</link>
            <guid>https://zip-go.github.io/blog/3</guid>
            <pubDate>Fri, 21 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[안녕하세요, 집사의고민 백엔드 개발자 무민입니다. 이번 글에서는 저희 팀이 선택한 Merge 전략에 대해 소개하고 어떻게 적용했는지 알려드리려고 합니다.]]></description>
            <content:encoded><![CDATA[<p>안녕하세요, 집사의고민 백엔드 개발자 무민입니다. 이번 글에서는 저희 팀이 선택한 Merge 전략에 대해 소개하고 어떻게 적용했는지 알려드리려고 합니다.</p><hr><p>이번에 집사의고민 팀에서 브랜치를 정하고 <strong>어떻게 병합</strong>할지에 대해 얘기가 나왔다. 스쿼시 어쩌구저쩌구 리베이스 어쩌구저쩌구... 이런 용어가 나오길래 아 아직도 깃허브에 대해 모르는 게 많구나 다시 한번 느끼고 <strong>Merge 전략</strong>에 대해 정리하고 가고자 한다.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="merge-전략">Merge 전략<a href="#merge-전략" class="hash-link" aria-label="Direct link to Merge 전략" title="Direct link to Merge 전략">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="merge-commit">Merge Commit<a href="#merge-commit" class="hash-link" aria-label="Direct link to Merge Commit" title="Direct link to Merge Commit">​</a></h3><p>Merge Commit은 일반적인 브랜치 병합 전략으로 <strong>두 개의 브랜치를 병합할 때 새로운 커밋을 생성</strong>한다. 그림으로 보면 다음과 같다.</p><p><img loading="lazy" src="/assets/images/ms_1-7aff8e9cb33a5ae1cc8ebe7d522c1fe3.png" width="1740" height="946" class="img_ev3q"></p><ul><li>Merge 된 커밋(#4)으로부터 뒤로 돌아가면서 부모를 모두 찾아 브랜치를 구성</li><li>#4는 부모로 #3와 main을 가짐</li><li>#3은 #2를, #2는 #1을, #1은 main을 부모로 가져</li><li>main -&gt; #1 -&gt; #2 -&gt; #3 -&gt; #4의 구조가 히스토리로 남게 됨</li></ul><p>Merge Commit은 불필요한 commit message가 생기고 merge 순서와 commit 순서가 별도로 기록되어 history 관리가 어렵다는 단점이 있으나 머지 기록을 남긴다는 게 오히려 어떤 관리 포인트가(ex) n차 스프린트) 될 수도 있지 않을까 한다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="squash-and-merge">Squash and Merge<a href="#squash-and-merge" class="hash-link" aria-label="Direct link to Squash and Merge" title="Direct link to Squash and Merge">​</a></h3><p>Squash and Merge 전략은 <strong>여러 개의 커밋을 하나로 압축하여 병합</strong>하는 전략으로 브랜치의 모든 커밋이 단일 커밋으로 압축되어 기존 브랜치에 병합된다. 그림으로 보면 다음과 같다.</p><p><img loading="lazy" src="/assets/images/ms_2-69a771cb7babd8c9314b560f75bede06.png" width="1196" height="814" class="img_ev3q"></p><ul><li>커밋 #1, #2, #3는 main을 부모로 가진 단일 커밋</li><li>병합 후 작업한 브랜치의 커밋들은 메인 브랜치와 연관을 가지지 않는다.</li></ul><p>main에선 기능별로 합쳐진 깔끔한 history를 가져 히스토리 관리는 쉬우나 rollback이 어렵다는 단점이 있다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rebase-and-merge">Rebase and Merge<a href="#rebase-and-merge" class="hash-link" aria-label="Direct link to Rebase and Merge" title="Direct link to Rebase and Merge">​</a></h3><p>Rebase and Merge는 <strong>현재 브랜치의 변경 내용을 다른 브랜치의 최신 상태에 병합하는 전략</strong>으로 Merge Commit과 달리 새로운 커밋을 생성하지 않는다. 그림으로 보면 다음과 같다.</p><p><img loading="lazy" src="/assets/images/ms_3-f9b16136e78b3190c7f04fcc9d1427ce.png" width="1812" height="1302" class="img_ev3q"></p><ul><li>Base를 main의 최신 커밋(#5, New Base)으로 다시 설정</li><li>커밋 a, b, c의 관계를 그대로 유지한 채 메인 브랜치에 그대로 추가</li></ul><p>Commit 순서가 아닌 Merge 순서대로 기록되어 다른 PR의 커밋 메시지와 섞이지 않아 rollback이 용이하며 commit 단위의 히스토리가 남겨지게 된다. 하지만, rebase에 익숙하지 않은 경우 어려움이 발생할 수 있다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="그래서-어떤-방식을-선택">그래서 어떤 방식을 선택?<a href="#그래서-어떤-방식을-선택" class="hash-link" aria-label="Direct link to 그래서 어떤 방식을 선택?" title="Direct link to 그래서 어떤 방식을 선택?">​</a></h2><p>우선 우리팀은 main, develop, feature, hotfix 브랜치가 있는데 다음과 같은 병합 전략을 선택하기로 했다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="feature---develop">feature -&gt; develop<a href="#feature---develop" class="hash-link" aria-label="Direct link to feature -> develop" title="Direct link to feature -> develop">​</a></h3><ul><li><strong>Squash and Merge</strong> 방식</li><li>지저분한 커밋 내역을 하나의 커밋으로 묶어어 develop으로 병합하면서 기능 단위로 커밋</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="develop---main">develop -&gt; main<a href="#develop---main" class="hash-link" aria-label="Direct link to develop -> main" title="Direct link to develop -> main">​</a></h3><ul><li>롤백할일이 생길 수도 있으니 Squash and Merge 방식은 제외</li><li><strong>기본적으로 Merge Commit</strong> 방식<ul><li>매번 스프린트마다 완성되면 main으로 머지해 배포할 계획이니 <strong>N차 스프린트 기록</strong>을 남기기 위해 Merge commit</li></ul></li><li>일반적으로 넣는 경우 말고 추가적으로 넣어야 될 때 따로 기록할 필요 없으니 Rebase and Merge 방식</li></ul><p>References</p><ul><li><a href="https://meetup.nhncloud.com/posts/122" target="_blank" rel="noopener noreferrer">https://meetup.nhncloud.com/posts/122</a></li></ul>]]></content:encoded>
            <category>merge</category>
            <category>git</category>
            <category>branch</category>
        </item>
    </channel>
</rss>